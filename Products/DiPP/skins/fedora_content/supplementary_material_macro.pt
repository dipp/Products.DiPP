<html xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    i18n:domain="DiPP">
    <body>

        <div metal:define-macro="supplementary_material"
             i18n:domain="dipp"
             tal:define="articleFolder python:test(here.id == 'fulltext',here.getParentNode(),here);
                         path python:'/'.join(articleFolder.getPhysicalPath()); 
                         results python:here.portal_catalog(Type='Fedora Multimedia', path=path, getMMType='supplementary_material', sort_on='getObjPositionInParent')"
             tal:condition="results">
             
            <h2 i18n:translate="heading_supplementary_material" id="supplements" name="supplements">Supplementary material</h2>
            <ul tal:condition="results"
                class="supplementary-material">
                <li tal:repeat="result results">
                    <div tal:define="description result/Description"
                       tal:condition="description"
                       tal:content="description">
                        Beschreibungstext des Attachments
                    </div>
                    <span tal:replace="result/Title">Prim√§rdaten zum Artikel</span>
                    [ <a tal:define="url result/getURL"
                       tal:attributes="href string:$url/view">view</a> |
                    <a tal:define="url result/getURL"
                       tal:attributes="href string:$url/at_download/File">download</a> ]
                </li>
            </ul>
        </div>

     </body>
</html>
