<html xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal"
	metal:use-macro="here/main_template/macros/master">
	<metal:block fill-slot="base">
		<base href="" tal:attributes="href python: here.absolute_url() + '/'">
	</metal:block>

	<metal:block fill-slot="top_slot" tal:define="dummy python:request.set('disable_border',1)" />

	<body>

  <div metal:fill-slot="header">
    <h1>Neuen Artikel anlegen</h1>
  </div>

<div metal:fill-slot="main">

<tal:block tal:define="repository here/setPath">
  <!--<form action="pub_add_instance">
  <form action="zum_testen">
  <form action="addArticle">
  <form action="pub_modify_instance">-->
  <form action="ext/addArticle">
	  <input type="hidden" name="activity" value="hochladen" />
  
    <table border='0' width="100%">
      <tr>
        <th>Redakteur:</th>
        <td>
		<span tal:replace="user">user</span>
		<input name="redakteur" type="hidden" tal:attributes="value user" value="" />
	</td>
        </tr>
        <tr>
		    <th>Autor</th>
            <td>
           <!-- 
		    <select name="autor">
			    <option value="none"> --- wählen sie einen Autor ---</option>
                <tal:block tal:repeat="autor python:here.ext.membersOfGroup(here,group='Autoren')">
                    <option tal:condition="autor"
                            tal:content="autor/cn"
                            tal:attributes="value autor/uid">Autor</option>
                </tal:block>
            </select>
        -->
		<select name="autor">
			<option value="none"> --- wählen sie einen Autor ---</option>
			<option value="tolkien">tolkien</option>
			<option value="adams">adams</option>
<!--
			<tal:block tal:repeat="userAssign python:container.portal_openflow.usersAssignableTo(process_id='Publishing',activity_id='imprematur')">
				<option value="" tal:attributes="value userAssign" tal:content="userAssign">User</option>
			</tal:block>
-->
		</select>
        
      </tr>
      <tr>
        <th>OK des Autors:</th>
        <td>
			<input name="autorOK_required" type="radio" value="True" checked="checked"/> nötig
			<input name="autorOK_required" type="radio" value="False" /> nicht nötig
		</td>
      </tr>
      <tr>
        <th>OK des GastHrsg:</th>
        <td>
			<input name="gastHrsgOK_required" type="radio" value="True" checked="checked"/> nötig
			<input name="gastHrsgOK_required" type="radio" value="False" /> nicht nötig
		</td>
      </tr>
      <tr>
        <th>Titel:</th>
        <td>
		<input name="titel" type="text" size="40" value="Titel des Artikels" />
	</td>
      </tr>
	<tr>
		<th>für den Artikel:</th>
		<td>
			<select name="deadline_date">
				<option tal:attributes="value python: site_properties.deadline_no.strftime('%Y-%m-%d')" value="">no deadline</option>
				<tal:block tal:define="default portal_properties/deadline_default;
										max portal_properties/deadline_no"
							tal:repeat="loop python: here.ext.deadline_date(max,here)">
					<option tal:attributes="class loop/class; value python: loop['value'].strftime('%Y-%m-%d')"
							tal:content="python: loop['value'].strftime('%d.%b.%Y')">06-07-2004</option>
				</tal:block>
				
			</select>
			
			<select name="deadline_time">
				<tal:block tal:repeat="loop python: here.ext.deadline_time(12)">
					<option tal:attributes="value string: ${loop/H}:${loop/M}; selected loop/selected"
							tal:content="string: ${loop/H}:${loop/M}">12:00</option>
							
				</tal:block>
				
			</select>

		</td>
	</tr>
	<tr>
		<th>für den nächsten Schritt:</th>
		<td>
			<select name="deadline_next_date">
				<option tal:attributes="value python: site_properties.deadline_no.strftime('%Y-%m-%d')" value="">no deadline</option>
				<tal:block tal:define="default portal_properties/deadline_default;
										max portal_properties/deadline_no"
							tal:repeat="loop python: here.ext.deadline_date(max,here)">
					<option tal:attributes="class loop/class; value python: loop['value'].strftime('%Y-%m-%d')"
							tal:content="python: loop['value'].strftime('%d.%b.%Y')">06-07-2004</option>
				</tal:block>
				
			</select>
			
			<select name="deadline_next_time">
				<tal:block tal:repeat="loop python: here.ext.deadline_time(12)">
					<option tal:attributes="value string: ${loop/H}:${loop/M}; selected loop/selected"
							tal:content="string: ${loop/H}:${loop/M}">12:00</option>
							
				</tal:block>
				
			</select>

		</td>
	</tr>
	<tr>
	        <th>Dateien:</th>
		<td>
			Sie sind hier: <tal block tal:replace="structure here/breadcrumb"/><br>
				<!--
				Pfad: <tal block tal:replace="structure here/setPath"/><br>
				URL: <tal block tal:replace="structure here/absolute_url"/><br>
				-->
			<table class="listing" width="100%">
				<tr class="headings">
					<th>Dateiname</th>
					<th>Auswählen</th>
				</tr>
					<tr tal:repeat="loop python: here.ext.listDir(pfad=repository)">
						<tal:block tal:define="url string:${repository}/${loop}">
							<td><a href="" tal:attributes="href string:pub_add_instance_form?pfad=${url}" tal:content="loop">loop</a></td>
							<td><input type="checkbox" class="checkbox" name="dateien" value="" tal:attributes="value url" checked="checked"/></td>
						</tal:block>
					</tr>
			</table>
		</td>
	</tr>
	<tr>
		<th />
		<td>
			<input type="hidden" name="artikelUrl" value="" tal:attributes="value repository" >
			<input class="standalone" type="submit" name="Submit" value="ausgewählte Dateien hochladen" />
		</td>
	</tr>
    </table>
</form>
</tal:block>
  
  </div>
</body>
</html>
