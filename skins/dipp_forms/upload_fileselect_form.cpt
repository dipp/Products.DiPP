<html xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="here/main_template/macros/master">
    <metal:block fill-slot="base">
        <base href="" tal:attributes="href python: here.absolute_url() + '/'">
    </metal:block>

    <metal:block fill-slot="top_slot" tal:define="dummy python:request.set('disable_border',1)" />

    <body>


        <div metal:fill-slot="main">
            <a href="upload_metadata_form">metadaten</a>
            <h1 class="documentFirstheading">Dateiauswahl</h1>

            <script language="javascript">
                function toggle_metadata(status) {
                    var metadata = document.getElementById('metadata');
                    (status == 'hide') ? visibility = 'none' : visibility = 'block';
                    metadata.style.display = visibility;
                }
            </script>
            
                <form tal:attributes="action string:${here/absolute_url}/${template/id};"
                      tal:define="errors options/state/getErrors;
                                  qdc python:here.fedoraGetQDC(None);
                                  storageType string:permanent;
                                  params request/form;
                                  storage request/form/storageType|storageType"
                      method="post"
                      name="metadata_form"
                      id="metadata_form"
                      encType="multipart/form-data">


                    <input type="hidden" name="form.submitted" value="1" />
                    <input type="hidden" name="journalPID" value="" tal:attributes="value python:here.getJournalPID(here)" />
                    
                    
                    <div class="field"
                        tal:define="error errors/file|nothing;
                                    file request/file|nothing"
                        tal:attributes="class python:test(error, 'field error', 'field')"
                        i18n:domain="qdc">

                        <label for="file" i18n:translate="label_file">Dokument-Datei</label>

                        <span class="fieldRequired" title="Required"
                               i18n:attributes="title"
                               i18n:translate="label_required">(Required)</span>
                        <div tal:content="error">Validation error output</div>
                        <div class="formHelp" i18n:translate="help_file">
                            Wählen Sie  den Artikel im RTF oder XML (docbook) Format aus.
                        </div>

                        <!-- Dateivorauswahl aus Sicherheitsgründen nicht möglich, vgl. http://de.selfhtml.org/html/formulare/datei_upload.htm  -->
                        <input type="file" id="file" name="file"  size="50" />




                    </div>


                    <input class="context"
                           tabindex=""
                           type="submit"
                           name="form.button.Save"
                           value="Save"
                           i18n:attributes="value"
                           tal:attributes="tabindex tabindex/next;
                                           disabled python:test(isLocked, 'disabled', None);" />

                    <input class="standalone"
                           tabindex=""
                           type="submit"
                           name="form.button.Cancel"
                           value="Cancel"
                           i18n:attributes="value"
                           tal:attributes="tabindex tabindex/next;" />

                </form>
                
                <hr />
                <tal:block tal:content="structure request" />
        </div>
    </body>
</html>

