<html xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    metal:use-macro="here/dipp_workflow_template/macros/master">
    <metal:block fill-slot="base">
        <base href="" tal:attributes="href python: here.absolute_url() + '/'">
    </metal:block>

    <metal:block fill-slot="top_slot" tal:define="dummy python:request.set('disable_border',1)" />

    <body i18n:domain="dipp">


        <div metal:fill-slot="main">
            <h1 class="documentFirstheading" i18n:translate="">Article based statistics</h1>
            
            <div class="documentDescription" i18n:translate="description_statistics">
                Access statistics for peer reviewed articles based on Awstats.
            </div>
            
            <form tal:define="DateTime python:modules['DateTime'].DateTime;
                              currentyear python:DateTime().year();">
                <select name="year" action="statistics">
                    <option value="">---select year---</option>    
                    <tal:block tal:repeat="year python:range(currentyear,2004-1,-1)">
                        <option tal:content="year" tal:attributes="value year"></option>
                    </tal:block>
                </select>
                <input type="submit" value="submit"/>
                
                <pre tal:condition="exists: request/form/year"
                     tal:define="year request/form/year|currentyear"
                     i18n:translate="" i18n:domain="dipp" tal:content="python: here.getStatistics(here,year)">
                </pre>
            </form>
        </div>
    </body>
</html>


